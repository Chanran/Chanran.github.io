---
title: 由于centOS iptables开启导致网站无法访问
date: 2017-01-20 00:11:16
tags: [服务器]
catogory: [服务器]
---

# 前因

由于网站无法访问（不是我部署的），上去服务器查看问题。

# 过程

1. 先进入到网站目录，开启laravel的debug模式，看一下有没有反应，结果还是无法访问，想了一想，也不是500，那就不应该是网站的问题。

2. 因为服务器里php是5.3的，但是挂的网站却是php7的，就去检查php-fpm的进程，发现还在运行，也不是这里的问题。

3. 查看nginx的配置文件，看是不是有人改动了挂的网站的配置，发现也没有，reload了一下nginx，发现网站也没有好。

4. 综上，于是判断出不是应用和服务器软件nginx的问题。

5. 在服务器wget了一下网站的首页，倒！发现wget到了！那肯定是服务器到客户端之间出了问题，于是判断应该是服务器防火墙问题。

6. 80端口的应用跑得好好的，有个网站却挂掉了，应该是过滤规则有问题，于是执行了开启防火墙网站端口。

7. 这个时候被自己坑了！开启端口命令里的端口写成了php-fpm的端口，搞得弄了好久。后来被师兄点醒。。。改了一下命令里的端口号为网站端口号就好了。。。

# 关于

1. 服务器最好不要关闭防火墙，写好过滤规则就好。修改`/etc/sysconfig/iptables`里的过则。

2. mark一下关于iptables的文章
[iptables的详细介绍及配置方法](https://my.oschina.net/shipley/blog/299025)
[Iptables 规则 一些简单实例和详细介绍](http://www.cnblogs.com/gergro/archive/2008/06/06/1215219.html)

3. 做事一定要细心。
